<div class="container">
  <p>The delete user and user index api routes are restricted to users with the 'admin' role.</p>
  <ul class="list-group user-list">
    <li class="list-group-item" ng-repeat="user in admin.users">
	    <div class="user-info">
	        <strong>{{user.name}}</strong><br>
	        <span class="text-muted">{{user.email}}</span>
	    </div>
        <a ng-click="admin.delete(user.name, user)" class="trash"><span class="fa fa-trash fa-2x"></span></a>
    </li>
  </ul>

  <form class="form" name="form" ng-submit="admin.create(form, vm.user)" novalidate>

    <div class="form-group" ng-class="{ 'has-success': form.name.$valid && form.$submitted,
                                        'has-error': form.name.$invalid && form.$submitted }">
      <label>Name</label>

      <input type="text" name="name" class="form-control" ng-model="vm.user.name"
                 required/>
      <p class="help-block" ng-show="form.name.$error.required && form.$submitted">
        A name is required
      </p>
    </div>

    <div class="form-group" ng-class="{ 'has-success': form.email.$valid && form.$submitted,
                                        'has-error': form.email.$invalid && form.$submitted }">
      <label>Email</label>

      <input type="email" name="email" class="form-control" ng-model="vm.user.email"
             required
             mongoose-error/>
      <p class="help-block" ng-show="form.email.$error.email && form.$submitted">
        Doesn't look like a valid email.
      </p>
      <p class="help-block" ng-show="form.email.$error.required && form.$submitted">
        What's your email address?
      </p>
      <p class="help-block" ng-show="form.email.$error.mongoose">
        {{ vm.errors.email }}
      </p>
    </div>

    <div class="form-group" ng-class="{ 'has-success': form.password.$valid && form.$submitted,
                                        'has-error': form.password.$invalid && form.$submitted }">
      <label>Password</label>

      <input type="password" name="password" class="form-control" ng-model="vm.user.password"
             ng-minlength="3"
             required
             mongoose-error/>
      <p class="help-block"
         ng-show="(form.password.$error.minlength || form.password.$error.required) && form.$submitted">
        Password must be at least 3 characters.
      </p>
      <p class="help-block" ng-show="form.password.$error.mongoose">
        {{ vm.errors.password }}
      </p>
    </div>

    <div class="form-group" ng-class="{ 'has-success': form.confirmPassword.$valid && form.$submitted,
                                        'has-error': form.confirmPassword.$invalid && form.$submitted }">
      <label>Confirm Password</label>
      <input type="password" name="confirmPassword" class="form-control" ng-model="vm.user.confirmPassword"
             match="vm.user.password"
             ng-minlength="3" required/>
      <p class="help-block"
         ng-show="form.confirmPassword.$error.match && form.$submitted">
        Passwords must match.
      </p>
    </div>

    <div>
      <button class="btn btn-lg btn-success" type="submit">
        Add User
      </button>
    </div>

  </form>

</div>
